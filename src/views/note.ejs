<script>
  $(document).ready(function() {
      var i = 0;
      $('button[name="edit"]').on('click', function() {
          i++;
          if(i <= 1) {
              $('fieldset[name="form-control-fieldset"]').removeAttr("disabled");
              $('button[name="edit"]').attr("hidden", true);
              $('button[name="return"]').attr("hidden", true);
              var saveBtn = $('<button type="submit" class="btn btn-primary">Save changes</button>');
              var cancelBtn = $('<button type="button" class="btn btn-warning">Cancel</button>');            
              $("form").append(saveBtn);
              $("form").append(cancelBtn);
          }
          $(cancelBtn).on('click', function() {
            i = 0;
            $('fieldset[name="form-control-fieldset"]').attr("disabled", true);
            $('button[name="edit"]').removeAttr("hidden");
            $('button[name="return"]').removeAttr("hidden");
            $(cancelBtn).remove();
            $(saveBtn).remove();
            $("form")[0].reset();
          });

          $(saveBtn).on('click', function() {
              $('div[id="NoteUpdateConfirmationModal"]').removeAttr("aria-hidden");
              $('form').submit( function(event) {
                var formId = this.id,
                form = this;

                event.preventDefault();

                setTimeout( function () { 
                    $('div[id="NoteUpdateConfirmationModal"]').attr("aria-hidden", true);
                    form.submit();
                }, 1000);
            }); 
          });
      });
  });
</script>

<section>
    <div class="modal fade" id="NoteUpdateConfirmationModal" tabindex="-1" role="dialog" aria-labelledby="NoteUpdateConfirmationModal" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
              Test
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <div class="container col-lg-6 col-md-6 col-sm-12 text-center justify-content-center">
        <hr><h1>Note</h1><hr>
        <form action="/dashboard/note/edit/<%= id %>" method="POST">
            <fieldset name="form-control-fieldset" disabled>
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="title" class="form-control" name="title" value="<%= subject %>">
                </div>
                <div class="form-group">
                    <label for="body">Content</label>
                    <textarea type="body" class="form-control" name="body"><%= content %></textarea>
                </div>
                <div class="form-group">
                    <label for="priority">Priority</label>
                    <select class="form-control" id="form-control" name="priority">
                      <option>Low</option>
                      <option>Medium</option>
                      <option>High</option>
                    </select>
                </div>
                <div class="form-group" disabled>
                    <label for="status">Status</label>
                    <select class="form-control" id="form-control" name="status">
                      <option>To do</option>
                      <option>In progress</option>
                      <option>Done</option>
                    </select>
                  </div>
            </fieldset>
            <button type="button" name="edit" class="btn btn-success">Edit</button>
            <a role="button" name="return" class="btn btn-info" href="/dashboard">Return</button></a>
        </form>
    </div>
</section>